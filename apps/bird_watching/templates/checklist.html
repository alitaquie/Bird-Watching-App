[[extend 'layout.html']]

<style>
[v-cloak] {
     display: none;
}
.table-container {
    overflow-x: auto;
}
</style>

<div class="section" id="app" v-cloak>
  <h1 class="title">Checklist</h1>
  <div class="field">
    <label class="label">Search Species</label>
    <div class="control">
      <input class="input" type="text" placeholder="Search species" v-model="search">
    </div>
  </div>
  <div class="table-container">
    <table class="table is-fullwidth is-striped">
      <thead>
        <tr>
          <th>Species</th>
          <th>Count</th>
          <th>Action</th>
        </tr>
      </thead>
      <tbody>
        <tr v-for="species in filteredSpecies" :key="species.id">
          <td>{{ species.name }}</td>
          <td><input class="input" type="number" v-model.number="species.count"></td>
          <td><button class="button is-success" @click="incrementCount(species)">+</button></td>
        </tr>
      </tbody>
    </table>
  </div>
  <div class="buttons">
    <button class="button is-primary" @click="submitChecklist">Submit</button>
  </div>
  <h2 class="title">My Checklists</h2>
  <div class="table-container">
    <table class="table is-fullwidth is-striped">
      <thead>
        <tr>
          <th>Date</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody>
        <tr v-for="checklist in checklists" :key="checklist.id">
          <td>{{ checklist.observation_date }}</td>
          <td>
            <button class="button is-info" @click="editChecklist(checklist)">Edit</button>
            <button class="button is-danger" @click="deleteChecklist(checklist.id)">Delete</button>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
</div>

[[block page_scripts]]
<script>
  let my_callback_url = "[[=XML(my_callback_url)]]";
  let get_species_url = "[[=XML(get_species_url)]]";
  let get_checklists_url = "[[=XML(get_checklists_url)]]";
  let get_checklist_url = "[[=XML(get_checklist_url)]]"; 
  let submit_checklist_url = "[[=XML(submit_checklist_url)]]";
  let delete_checklist_url = "[[=XML(delete_checklist_url)]]";
</script>
<script src="js/checklist.js"></script>
[[end]]
